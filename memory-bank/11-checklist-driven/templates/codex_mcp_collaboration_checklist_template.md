# codex_mcp 協働相談チェックリスト（テンプレート）

困難タスクの打開を目的に、別AIエージェントと codex_mcp で協働するための運用テンプレート。推測禁止・事実ベース・セキュリティ厳守。

> 使い方: このテンプレをコピーし、実タスク用に `checklists/<date|issue>_codex_mcp_<topic>_checklist.md` を作成して運用してください。

## 0. 原則・方針
- [ ] 推測禁止（事実/再現/ログ/差分ベースで記述）
- [ ] セキュリティ絶対（鍵/トークン/個人情報は出さない）
- [ ] Local-first（外部調査は既定OFF・許可時のみ）
- [ ] 同一テーマは同一Session IDで継続（混線防止）
- [ ] データ最小化（必要抜粋のみ、長大ログは要点化）

## 1. エスカレーショントリガー確認（1つ以上該当で実施）
- [ ] 30分以上停滞 or 3回以上の有効試行不成立
- [ ] 重大度高で原因不明、切り分け困難
- [ ] 設計のトレードオフが拮抗し決め手不足
- [ ] レビュー/CIでのみ再現しローカルで困難

## 2. コンテキスト準備（テンプレ準拠）
- [ ] Problem（現象/期待を1-3文で）
- [ ] Environment（対象リポ/バージョン/依存）
- [ ] Reproduction（最短手順・抜粋ログ）
- [ ] Attempts（試行→結果を因果で）
- [ ] Hypotheses（根拠付き仮説）
- [ ] Constraints（制約）
- [ ] Ask（ゴールを1つに絞る）
- [ ] Artifacts（関連ファイル/行/PR/テストのパス）

## 3. 初回相談（新規セッション）
- [ ] codex_mcp にテンプレに沿った prompt を投げる
- [ ] 返却された Session ID を記録（例: memory-bank/06-project/context/active_context.md）
- [ ] 提案事項を可観測なタスクに分解

## 4. 継続相談（同セッション）
- [ ] codex_mcp-reply で Session ID を使い、差分（新観測/失敗/新仮説）を送る
- [ ] 15-25分で一区切り。進展が薄い場合は視点/仮説を更新
- [ ] テーマが変わる場合は新規セッションに切替

## 5. 実行と検証
- [ ] 提案のうち安全で価値の高いものから試す
- [ ] 事実（ログ/再現性）で成否を記録
- [ ] 重要な差分は次の codex_mcp-reply に反映

## 6. 収束と記録
- [ ] 解決 or 次善策/回避策の確立
- [ ] memory-bank に Problem→Approach→Outcome→Next で要点記録
- [ ] 関連PR/テスト/ファイルパスへリンク

## 7. セキュリティ/コンプライアンス確認
- [ ] 秘密情報を含めていないことを最終確認
- [ ] 外部調査はユーザー許可の範囲内でのみ実施

## 8. 受け入れ基準
- [ ] 問題が解決、または意思決定/次の具体ステップが明確
- [ ] 記録が残り、将来再利用できる形で整理済み

---

### Prompt テンプレ（コピー用）

```
[Problem]
- 現象/エラー内容: 
- 期待動作: 

[Environment]
- リポ/サービス: 
- バージョン/依存: 

[Reproduction]
- 再現手順: 
- ログ/出力: 

[Attempts]
- 試行1: 結果/観測
- 試行2: 結果/観測

[Hypotheses]
- 仮説: 根拠

[Constraints]
- 

[Ask]
- 今回のゴール: 

[Artifacts]
- パス/行/PR/テスト: 
```

